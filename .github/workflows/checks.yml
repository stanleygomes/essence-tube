name: Code Checks

on:
  workflow_call:

jobs:
  lint:
    needs: [conventional-commits]
    uses: ./.github/workflows/lint.yml

  format:
    needs: [conventional-commits]
    uses: ./.github/workflows/format.yml

  check-types:
    needs: [conventional-commits]
    uses: ./.github/workflows/check-types.yml

  audit:
    uses: ./.github/workflows/audit.yml

  dependency-review:
    needs: [conventional-commits]
    uses: ./.github/workflows/dependency-review.yml

  codeql:
    uses: ./.github/workflows/codeql.yml
    needs: [build]
    permissions:
      contents: read
      security-events: write
